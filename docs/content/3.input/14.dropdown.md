---
head:
  meta:
    - name: 'stage'
      content: 'alpha'
navigation:
  stage: 'alpha'
---

# Dropdown 下拉选择器

:stage{type="alpha"}

下拉打开这个抽屉,喜欢的糖果都在里面🍬

```ts
import { DuDropdown } from 'dangoui'
```

## 使用注意

- `value` 为嵌套对象结构，用于存储每个维度下各分组的选中值
- 组件支持单维度或多维度筛选
- 支持单选和多选模式

## 示例

::demo
---
title: 基础用法
---

最简单的单维度筛选

#snippet
```vue
<template>
  <PreviewBlock title="单维度筛选">
    <DuButton @click="handleShow" full size="large">选择价格区间</DuButton>
    <DuDropdown
      :dimensions="dimensions"
      v-model:value="value"
      v-model:visible="visible"
      @confirm="handleConfirm"
    />
    <!-- 结果展示 -->
    <div v-if="Object.keys(value).length > 0" class="result-display">
      <template v-for="(items, key) in value" :key="key">
        <div class="result-group">
          <span class="result-label">{{dimensions.find(item=>item.value === key).label}}:</span>
          <div class="result-tags">
            <template v-for="values in items" :key="groupKey">
              <DuTag 
                size="small"
                class="result-tag"
              >
                {{ values.label }}
              </DuTag>
            </template>
          </div>
        </div>
      </template>
    </div>
  </PreviewBlock>
</template>

<script setup lang="ts">
import { ref } from 'vue'
import { DuButton, DuTag } from 'dangoui'
import DuDropdown from '/Users/zyr/Desktop/echo-project/dangoui/packages/dangoui/src/dropdown/Dropdown.vue'

const value = ref({})
const visible = ref(false)

function handleShow() {
  visible.value = true
}

function handleConfirm(selected) {
  console.log('选中的选项：', selected)
}

const dimensions = [
  {
    label: '价格区间',
    value: 'price',
    multiple: true,
    options: [
      { label: '50元以下', value: '0-50' },
      { label: '50-100元', value: '50-100' },
      { label: '100-200元', value: '100-200' },
      { label: '200-500元', value: '200-500' },
      { label: '500元以上', value: '500+' }
    ]
  }
]
</script>

<style scoped>
.result-display {
  display: flex;
  flex-direction: column;
  gap: 12px;
  margin-top: 12px;
  font-size: 14px;
}

.result-group {
  display: flex;
  align-items: flex-start;
  gap: 8px;
}

.result-label {
  color: #666;
  white-space: nowrap;
}

.result-tags {
  display: flex;
  flex-wrap: wrap;
  gap: 4px;
}

.result-tag {
  margin-right: 4px;
}
</style>
```
::

::demo
---
title: 多维度筛选
---

支持多个筛选维度的复杂场景

#snippet
```vue
<template>
  <PreviewBlock title="多维度多分组筛选">
    <DuButton @click="handleShow" full size="large">打开筛选</DuButton>
    <DuDropdown
      :dimensions="dimensions"
      v-model:value="value"
      v-model:visible="visible"
      @confirm="handleConfirm"
    />
    <!-- 分组展示结果 -->
    <div v-if="Object.keys(value).length > 0" class="complex-result">
      <div class="result-header">
        <h4>筛选结果</h4>
        <DuButton type="text" size="small" @click="clearAll">清空全部</DuButton>
      </div>
      <div class="result-content">
        <template v-for="(items, key) in value" :key="key">
          <div v-if="hasSelectedItems(items)" class="result-dimension">
            <div class="dimension-header">
              <span class="dimension-label">{{ getDimensionLabel(key) }}</span>
            </div>
            <!-- 处理直接options的情况 -->
            <template v-if="!hasGroups(key)">
              <div class="option-tags">
                <DuTag 
                  v-for="item in items"
                  :key="item.value"
                  size="small"
                  color="primary"
                >
                  {{ item.label }}
                </DuTag>
              </div>
            </template>
            <!-- 处理groups的情况 -->
            <template v-else>
              <div class="groups-container">
                <template v-for="(values, groupKey) in items" :key="groupKey">
                  <div v-if="values.length > 0" class="group-item">
                    <div class="group-header">
                      <span class="group-label">{{ getGroupLabel(key, groupKey) }}</span>
                    </div>
                    <div class="group-tags">
                      <DuTag 
                        v-for="item in values"
                        :key="item.value"
                        size="small"
                        color="primary"
                      >
                        {{ item.label }}
                      </DuTag>
                    </div>
                  </div>
                </template>
              </div>
            </template>
          </div>
        </template>
      </div>
    </div>
  </PreviewBlock>
</template>

<script setup lang="ts">
import { ref } from 'vue'
import { DuButton, DuTag } from 'dangoui'
import DuDropdown from '/Users/zyr/Desktop/echo-project/dangoui/packages/dangoui/src/dropdown/Dropdown.vue'

const value = ref({})
const visible = ref(false)

function hasSelectedItems(items: any) {
  return Object.values(items).some(group => (group as any[]).length > 0)
}

function getDimensionLabel(key: string) {
  return dimensions.find(d => d.value === key)?.label || key
}

function hasGroups(key: string) {
  const dimension = dimensions.find(d => d.value === key)
  return dimension && 'groups' in dimension
}

function getGroupLabel(dimensionKey: string, groupKey: string) {
  const dimension = dimensions.find(d => d.value === dimensionKey)
  if (!dimension || !('groups' in dimension)) return groupKey
  
  const group = dimension.groups.find(g => g.value === groupKey)
  return group?.label || groupKey
}


function handleShow() {
  visible.value = true
}

function handleConfirm(selected: any) {
  console.log('选中的选项：', selected)
}

function clearAll() {
  value.value = {}
}

const dimensions = [
  {
    label: '商品分类',
    value: 'category',
    groups: [
      {
        label: '食品饮料',
        value: 'food_drink',
        multiple: true,
        options: [
          { label: '零食小吃', value: 'snacks' },
          { label: '饮料冲调', value: 'drinks' },
          { label: '生鲜果蔬', value: 'fresh' },
          { label: '粮油调味', value: 'condiment' }
        ]
      },
      {
        label: '服装鞋包',
        value: 'clothing_bags',
        multiple: true,
        options: [
          { label: '上衣', value: 'tops' },
          { label: '裤装', value: 'pants' },
          { label: '裙装', value: 'dresses' },
          { label: '箱包', value: 'bags' }
        ]
      }
    ]
  },
  {
    label: '价格区间',
    value: 'price_range',
    multiple: false,
    options: [
      { label: '50元以下', value: '0-50' },
      { label: '50-100元', value: '50-100' },
      { label: '100-200元', value: '100-200' },
      { label: '200-500元', value: '200-500' },
      { label: '500元以上', value: '500+' }
    ]
  },
  {
    label: '商品属性',
    value: 'product_attrs',
    groups: [
      {
        label: '优惠活动',
        value: 'promotions',
        multiple: true,
        options: [
          { label: '限时特惠', value: 'time_limited' },
          { label: '满减优惠', value: 'full_reduction' },
          { label: '会员专享', value: 'vip_only' },
          { label: '赠品活动', value: 'gift' }
        ]
      },
      {
        label: '配送方式',
        value: 'delivery',
        multiple: false,
        options: [
          { label: '包邮', value: 'free_shipping' },
          { label: '极速达', value: 'fast_delivery' },
          { label: '同城配送', value: 'local_delivery' }
        ]
      }
    ]
  }
]
</script>

<style scoped>
.complex-result {
  margin-top: 16px;
  padding: 16px;
  border: 1px solid var(--du-gray-3);
  border-radius: 8px;
  width: 100%;
  background: #fff;
}

.result-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 16px;
  padding-bottom: 12px;
  border-bottom: 1px solid var(--du-gray-2);
}

.result-header h4 {
  margin: 0;
  font-size: 15px;
  font-weight: 500;
  color: var(--du-gray-9);
}

.result-content {
  display: flex;
  flex-direction: column;
  gap: 20px;
}

.result-dimension {
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.dimension-header {
  display: flex;
  align-items: center;
  gap: 8px;
}

.dimension-label {
  font-size: 14px;
  color: var(--du-gray-7);
  font-weight: 500;
}

.option-tags {
  display: flex;
  flex-wrap: wrap;
  gap: 8px;
  padding: 4px 0;
}

.groups-container {
  display: flex;
  flex-direction: column;
  gap: 12px;
}

.group-item {
  display: flex;
  flex-direction: column;
  gap: 6px;
  padding-left: 12px;
}

.group-header {
  display: flex;
  align-items: center;
}

.group-label {
  font-size: 13px;
  color: var(--du-gray-6);
}

.group-tags {
  display: flex;
  flex-wrap: wrap;
  gap: 8px;
}

:deep(.du-tag) {
  cursor: pointer;
  transition: all 0.2s;
}

:deep(.du-tag:hover) {
  opacity: 0.85;
}
</style>
```
::

## API

::api{component="Dropdown"}
::
