---
head:
  meta:
    - name: 'stage'
      content: 'alpha'
navigation:
  stage: 'alpha'
---

# Dropdown ä¸‹æ‹‰é€‰æ‹©å™¨

:stage{type="alpha"}

ä¸‹æ‹‰æ‰“å¼€è¿™ä¸ªæŠ½å±‰,å–œæ¬¢çš„ç³–æœéƒ½åœ¨é‡Œé¢ğŸ¬

```ts
import { DuDropdown } from 'dangoui'
```

## ä½¿ç”¨æ³¨æ„

- `value` ä¸ºåµŒå¥—å¯¹è±¡ç»“æ„ï¼Œç”¨äºå­˜å‚¨æ¯ä¸ªç»´åº¦ä¸‹å„åˆ†ç»„çš„é€‰ä¸­å€¼
- ç»„ä»¶æ”¯æŒå•ç»´åº¦æˆ–å¤šç»´åº¦ç­›é€‰
- æ”¯æŒå•é€‰å’Œå¤šé€‰æ¨¡å¼

## ç¤ºä¾‹

::demo
---
title: åŸºç¡€ç”¨æ³•
---

æœ€ç®€å•çš„å•ç»´åº¦ç­›é€‰

#snippet
```vue
<template>
  <PreviewBlock title="å•ç»´åº¦ç­›é€‰">
    <DuButton @click="handleShow" full size="large">é€‰æ‹©ä»·æ ¼åŒºé—´</DuButton>
    <DuDropdown
      :options="options"
      v-model:value="value"
      v-model:visible="visible"
      @confirm="handleConfirm"
    />
    <!-- ç»“æœå±•ç¤º -->
    <div v-if="Object.keys(value)?.length > 0" class="result-display">
      <template v-for="(items, key) in value" :key="key">
        <div class="result-group">
          <div class="result-label">{{options.find(item=>item.value === key).label}}:</div>
          <div class="result-tags">
            <template v-for="values in items" :key="groupKey">
              <DuTag 
                size="small"
                class="result-tag"
              >
                {{ values.label }}
              </DuTag>
            </template>
          </div>
        </div>
      </template>
    </div>
  </PreviewBlock>
</template>

<script setup lang="ts">
import { ref } from 'vue'
import { DuButton, DuTag, DuDropdown } from 'dangoui'
const value = ref({})
const visible = ref(false)

function handleShow() {
  visible.value = true
}

function handleConfirm(selected) {
  console.log('é€‰ä¸­çš„é€‰é¡¹ï¼š', selected)
}

const options = [
  {
    label: 'ä»·æ ¼åŒºé—´',
    value: 'price',
    multiple: true,
    options: [
      { label: '50å…ƒä»¥ä¸‹', value: '0-50' },
      { label: '50-100å…ƒ', value: '50-100' },
      { label: '100-200å…ƒ', value: '100-200' },
      { label: '200-500å…ƒ', value: '200-500' },
      { label: '500å…ƒä»¥ä¸Š', value: '500+' }
    ]
  }
]
</script>

<style scoped>
.result-display {
  display: flex;
  flex-direction: column;
  gap: 12px;
  margin-top: 12px;
  font-size: 14px;
}

.result-group {
  display: flex;
  align-items: flex-start;
  gap: 8px;
}

.result-label{
  width:100px
}

.result-tags {
  display: flex;
  flex-wrap: wrap;
  gap: 4px;
}

.result-tag {
  margin-right: 4px;
}
</style>
```
::


::demo
---
title: è‡ªåŠ¨å…³é—­
---

ç‚¹å‡»é€‰é¡¹åè‡ªåŠ¨å…³é—­ï¼Œé€‚ç”¨äºå•é€‰åœºæ™¯ã€‚

#snippet
```vue
<template>
  <PreviewBlock title="ç‚¹å‡»è‡ªåŠ¨å…³é—­">
    <DuButton @click="handleShow" full size="large">é€‰æ‹©å•†å“ç±»å‹</DuButton>
    <DuDropdown
      :options="options"
      v-model:value="value"
      v-model:visible="visible"
      :show-footer="false"
      @confirm="handleConfirm"
    />
    <!-- ç»“æœå±•ç¤º -->
    <div v-if="Object.keys(value)?.length > 0" class="result-display">
      <template v-for="(items, key) in value" :key="key">
        <div class="result-group">
          <div class="result-label">{{options.find(item=>item.value === key).label}}:</div>
          <div class="result-tags">
            <template v-for="values in items" :key="groupKey">
              <DuTag 
                size="small"
                class="result-tag"
              >
                {{ values.label }}
              </DuTag>
            </template>
          </div>
        </div>
      </template>
    </div>
  </PreviewBlock>
</template>

<script setup lang="ts">
import { ref } from 'vue'
import { DuButton, DuTag, DuDropdown } from 'dangoui'

const value = ref({})
const visible = ref(false)

function handleShow() {
  visible.value = true
}

function handleConfirm(selected) {
  console.log('é€‰ä¸­çš„é€‰é¡¹ï¼š', selected)
}

const options = [
  {
    label: 'å•†å“ç±»å‹',
    multiple: false,
    value: 'type',
    options: [
      { label: 'æ•°ç äº§å“', value: 'digital' },
      { label: 'å®¶å±…ç”¨å“', value: 'home' },
      { label: 'æœè£…é‹åŒ…', value: 'clothing' },
      { label: 'ç¾å¦†æŠ¤è‚¤', value: 'beauty' },
      { label: 'é£Ÿå“é¥®æ–™', value: 'food' }
    ]
  }
]
</script>

<style scoped>
.result-display {
  display: flex;
  flex-direction: column;
  gap: 12px;
  margin-top: 12px;
  font-size: 14px;
}

.result-group {
  display: flex;
  align-items: flex-start;
  gap: 8px;
}

.result-label{
  width:100px
}

.result-tags {
  display: flex;
  flex-wrap: wrap;
  gap: 4px;
}

.result-tag {
  margin-right: 4px;
}
</style>
```
::

::demo
---
title: åˆ—è¡¨å¸ƒå±€
---

é€‚ç”¨äºå•é€‰åœºæ™¯çš„åˆ—è¡¨å¸ƒå±€ã€‚

#snippet
```vue
<template>
  <PreviewBlock title="åˆ—è¡¨å¸ƒå±€">
    <DuButton @click="handleShow" full size="large">é€‰æ‹©å•†å“ç±»å‹</DuButton>
    <DuDropdown
      :options="options"
      v-model:value="value"
      v-model:visible="visible"
      :show-footer="false"
      layout="list"
      @confirm="handleConfirm"
    />
    <!-- ç»“æœå±•ç¤º -->
    <div v-if="Object.keys(value)?.length > 0" class="result-display">
      <template v-for="(items, key) in value" :key="key">
        <div class="result-group">
          <div class="result-label">{{options.find(item=>item.value === key).label}}:</div>
          <div class="result-tags">
            <template v-for="values in items" :key="values.value">
              <DuTag 
                size="small"
                class="result-tag"
              >
                {{ values.label }}
              </DuTag>
            </template>
          </div>
        </div>
      </template>
    </div>
  </PreviewBlock>
</template>

<script setup lang="ts">
import { ref } from 'vue'
import { DuButton, DuTag, DuDropdown } from 'dangoui'
const value = ref({})
const visible = ref(false)

function handleShow() {
  visible.value = true
}

function handleConfirm(selected) {
  console.log('é€‰ä¸­çš„é€‰é¡¹ï¼š', selected)
}

const options = [
  {
    label: 'å•†å“ç±»å‹',
    value: 'type',
    multiple: false,
    options: [
      { label: 'æ•°ç äº§å“', value: 'digital' },
      { label: 'å®¶å±…ç”¨å“', value: 'home' },
      { label: 'æœè£…é‹åŒ…', value: 'clothing' },
      { label: 'ç¾å¦†æŠ¤è‚¤', value: 'beauty' },
      { label: 'é£Ÿå“é¥®æ–™', value: 'food' }
    ]
  }
]
</script>

<style scoped>
.result-display {
  display: flex;
  flex-direction: column;
  gap: 12px;
  margin-top: 12px;
  font-size: 14px;
}

.result-group {
  display: flex;
  align-items: flex-start;
  gap: 8px;
}

.result-label {
  width: 100px;
}

.result-tags {
  display: flex;
  flex-wrap: wrap;
  gap: 4px;
}
</style>
```
::


::demo
---
title: å¤šç»´åº¦ç­›é€‰
---

æ”¯æŒå¤šä¸ªç­›é€‰ç»´åº¦çš„å¤æ‚åœºæ™¯

#snippet
```vue
<template>
  <PreviewBlock title="å¤šç»´åº¦å¤šåˆ†ç»„ç­›é€‰">
    <DuButton @click="handleShow" full size="large">æ‰“å¼€ç­›é€‰</DuButton>
    <DuDropdown
      :options="options"
      v-model:value="value"
      v-model:visible="visible"
      @confirm="handleConfirm"
    />
    <!-- åˆ†ç»„å±•ç¤ºç»“æœ -->
    <div v-if="Object.keys(value).length > 0" class="complex-result">
      <div class="result-header">
        <h4>ç­›é€‰ç»“æœ</h4>
        <DuButton type="text" size="small" @click="clearAll">æ¸…ç©ºå…¨éƒ¨</DuButton>
      </div>
      <div class="result-content">
        <template v-for="(items, key) in value" :key="key">
          <div v-if="hasSelectedItems(items)" class="result-option">
            <div class="option-header">
              <span class="option-label">{{ getOptionLabel(key) }}</span>
            </div>
            <!-- å¤„ç†ç›´æ¥optionsçš„æƒ…å†µ -->
            <template v-if="!hasGroups(key)">
              <div class="option-tags">
                <DuTag 
                  v-for="item in items"
                  :key="item.value"
                  size="small"
                  color="primary"
                  closeable
                  @close="() => handleTagClick(key, item)"
                >
                  {{ item.label }}
                </DuTag>
              </div>
            </template>
            <!-- å¤„ç†groupsçš„æƒ…å†µ -->
            <template v-else>
              <div class="groups-container">
                <template v-for="(values, groupKey) in items" :key="groupKey">
                  <div v-if="values.length > 0" class="group-item">
                    <div class="group-header">
                      <span class="group-label">{{ getGroupLabel(key, groupKey) }}</span>
                    </div>
                    <div class="group-tags">
                      <DuTag 
                        v-for="item in values"
                        :key="item.value"
                        size="small"
                        color="primary"
                        closeable
                        @close="() => handleTagClick(key, item)"
                      >
                        {{ item.label }}
                      </DuTag>
                    </div>
                  </div>
                </template>
              </div>
            </template>
          </div>
        </template>
      </div>
    </div>
  </PreviewBlock>
</template>

<script setup lang="ts">
import { ref } from 'vue'
import { DuButton, DuTag,DuDropdown } from 'dangoui'

const value = ref({})
const visible = ref(false)

function hasSelectedItems(items: any) {
  if(Array.isArray(items)) return items.length>0
  return Object.values(items).some(group => (group as any[]).length > 0)
}

function getOptionLabel(key: string) {
  return options.find(opt => opt.value === key)?.label || key
}

function hasGroups(key: string) {
  const option = options.find(opt => opt.value === key)
  return option && 'groups' in option
}

function getGroupLabel(optionKey: string, groupKey: string) {
  const option = options.find(opt => opt.value === optionKey)
  if (!option || !('groups' in option)) return groupKey
  
  const group = option.groups.find(g => g.value === groupKey)
  return group?.label || groupKey
}

function handleTagClick(optionKey: string, item: any) {
  const option = options.find(opt => opt.value === optionKey)
  if (!option) return
  if ('options' in option) {
    const currentOptions = value.value[optionKey] || []
    const index = currentOptions.findIndex((opt: any) => opt.value === item.value)
    if (index > -1) {
      currentOptions.splice(index, 1)
      if (currentOptions.length === 0) {
        delete value.value[optionKey]
      }
    }
  } else {
    const groups = value.value[optionKey] || {}
    Object.entries(groups).forEach(([groupKey, options]: [string, any]) => {
      const index = options.findIndex((opt: any) => opt.value === item.value)
      if (index > -1) {
        options.splice(index, 1)
        if (options.length === 0) {
          delete groups[groupKey]
        }
        if (Object.keys(groups).length === 0) {
          delete value.value[optionKey]
        }
      }
    })
  }
}

function handleShow() {
  visible.value = true
}

function handleConfirm(selected: any) {
  console.log('é€‰ä¸­çš„é€‰é¡¹ï¼š', selected)
}

function clearAll() {
  value.value = {}
}

const options = [
  {
    label: 'å•†å“åˆ†ç±»',
    value: 'category',
    groups: [
      {
        label: 'é£Ÿå“é¥®æ–™',
        value: 'food_drink',
        multiple: true,
        options: [
          { label: 'é›¶é£Ÿå°åƒ', value: 'snacks' },
          { label: 'é¥®æ–™å†²è°ƒ', value: 'drinks' },
          { label: 'ç”Ÿé²œæœè”¬', value: 'fresh' },
          { label: 'ç²®æ²¹è°ƒå‘³', value: 'condiment' }
        ]
      },
      {
        label: 'æœè£…é‹åŒ…',
        value: 'clothing_bags',
        multiple: true,
        options: [
          { label: 'ä¸Šè¡£', value: 'tops' },
          { label: 'è£¤è£…', value: 'pants' },
          { label: 'è£™è£…', value: 'dresses' },
          { label: 'ç®±åŒ…', value: 'bags' }
        ]
      }
    ]
  },
  {
    label: 'ä»·æ ¼åŒºé—´',
    value: 'price_range',
    multiple: false,
    options: [
      { label: '50å…ƒä»¥ä¸‹', value: '0-50' },
      { label: '50-100å…ƒ', value: '50-100' },
      { label: '100-200å…ƒ', value: '100-200' },
      { label: '200-500å…ƒ', value: '200-500' },
      { label: '500å…ƒä»¥ä¸Š', value: '500+' }
    ]
  },
  {
    label: 'å•†å“å±æ€§',
    value: 'product_attrs',
    groups: [
      {
        label: 'ä¼˜æƒ æ´»åŠ¨',
        value: 'promotions',
        multiple: true,
        options: [
          { label: 'é™æ—¶ç‰¹æƒ ', value: 'time_limited' },
          { label: 'æ»¡å‡ä¼˜æƒ ', value: 'full_reduction' },
          { label: 'ä¼šå‘˜ä¸“äº«', value: 'vip_only' },
          { label: 'èµ å“æ´»åŠ¨', value: 'gift' }
        ]
      },
      {
        label: 'é…é€æ–¹å¼',
        value: 'delivery',
        multiple: false,
        options: [
          { label: 'åŒ…é‚®', value: 'free_shipping' },
          { label: 'æé€Ÿè¾¾', value: 'fast_delivery' },
          { label: 'åŒåŸé…é€', value: 'local_delivery' }
        ]
      }
    ]
  }
]
</script>

<style scoped>
.complex-result {
  border: 1px solid #eee;
  border-radius: 8px;
  width: 100%;
  background: #fff;
  padding: 12px;
}

.result-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 15px;
}

.result-header h4 {
  margin: 0;
  font-size: 15px;
  font-weight: 500;
}

.result-content {
  display: flex;
  flex-direction: column;
  gap: 20px;
}

.result-option {
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.option-header {
  display: flex;
  align-items: center;
  gap: 8px;
}

.option-label {
  font-size: 14px;
  font-weight: 500;
}

.option-tags {
  display: flex;
  flex-wrap: wrap;
  gap: 8px;
  padding: 4px 0;
}

.groups-container {
  display: flex;
  flex-direction: column;
  gap: 12px;
}

.group-item {
  display: flex;
  flex-direction: column;
  gap: 6px;
  padding-left: 12px;
}

.group-header {
  display: flex;
  align-items: center;
}

.group-label {
  font-size: 13px;
}

.group-tags {
  display: flex;
  flex-wrap: wrap;
  gap: 8px;
}

:deep(.du-tag) {
  cursor: pointer;
  transition: all 0.2s;
}

:deep(.du-tag:hover) {
  opacity: 0.85;
}
</style>
```
::


::demo
---
title: è‡ªå®šä¹‰æ ·å¼
---

é€šè¿‡ `option-nav` å’Œ `content` æ’æ§½è‡ªå®šä¹‰é€‰æ‹©æ å’Œå†…å®¹åŒºåŸŸçš„æ ·å¼ã€‚

#snippet
```vue
<template>
  <PreviewBlock title="è‡ªå®šä¹‰æ ·å¼">
    <DuButton @click="handleShow" full size="large">æ‰“å¼€ç­›é€‰</DuButton>
    <DuDropdown
      :options="options"
      v-model:value="value"
      v-model:visible="visible"
      @confirm="handleConfirm"
    >
      <!-- è‡ªå®šä¹‰é€‰æ‹©æ  -->
      <template #option-nav="{ options, currentIndex, onChange }">
        <div class="custom-nav">
          <div
            v-for="(option, index) in options"
            :key="option.value"
            :class="['custom-nav-item', { active: currentIndex === index }]"
            @click="onChange(index)"
          >
            <DuIcon name="like-normal" :size="12" />
            <span>{{ option.label }}</span>
          </div>
        </div>
      </template>
      <!-- è‡ªå®šä¹‰å†…å®¹åŒºåŸŸ -->
      <template #content="{ currentOption, currentGroups, isSelected, onSelect }">
        <div class="custom-content">
          <div
            v-for="group in currentGroups"
            :key="group.value"
            class="custom-group"
          >
            <div v-if="currentGroups?.length > 1" class="custom-group-title">
              {{ group.label }}
            </div>
            <div class="custom-options">
              <div
                v-for="option in group.options"
                :key="option.value"
                :class="['custom-option', { active: isSelected(option, group) }]"
                @click="onSelect(option, group)"
              >
                <DuIcon name="wishing" :size="12" />
                <span>{{ option.label }}</span>
              </div>
            </div>
          </div>
        </div>
      </template>
    </DuDropdown>
    <!-- ç»“æœå±•ç¤º -->
    <div v-if="Object.keys(value)?.length > 0" class="result-display">
      <template v-for="(items, key) in value" :key="key">
        <div class="result-group">
          <div class="result-label">{{options.find(item=>item.value === key).label}}:</div>
          <div class="result-tags">
            <template v-for="values in items" :key="groupKey">
              <DuTag 
                size="small"
                class="result-tag"
              >
                {{ values.label }}
              </DuTag>
            </template>
          </div>
        </div>
      </template>
    </div>
  </PreviewBlock>
</template>

<script setup lang="ts">
import { ref } from 'vue'
import { DuButton, DuTag, DuIcon, DuDropdown } from 'dangoui'

const value = ref({})
const visible = ref(false)

function handleShow() {
  visible.value = true
}

function handleConfirm(selected) {
  console.log('é€‰ä¸­çš„é€‰é¡¹ï¼š', selected)
}

const options = [
  {
    label: 'å•†å“ç±»å‹',
    value: 'type',
    multiple: true,
    options: [
      { label: 'æ•°ç äº§å“', value: 'digital' },
      { label: 'å®¶å±…ç”¨å“', value: 'home' },
      { label: 'æœè£…é‹åŒ…', value: 'clothing' },
      { label: 'ç¾å¦†æŠ¤è‚¤', value: 'beauty' },
      { label: 'é£Ÿå“é¥®æ–™', value: 'food' }
    ]
  },
  {
    label: 'ä»·æ ¼åŒºé—´',
    value: 'price',
    multiple: false,
    options: [
      { label: '50å…ƒä»¥ä¸‹', value: '0-50' },
      { label: '50-100å…ƒ', value: '50-100' },
      { label: '100-200å…ƒ', value: '100-200' },
      { label: '200-500å…ƒ', value: '200-500' },
      { label: '500å…ƒä»¥ä¸Š', value: '500+' }
    ]
  }
]
</script>

<style scoped>
/* åŸºç¡€æ ·å¼ */
.custom-nav,
.custom-nav-item,
.custom-option {
  display: flex;
  align-items: center;
  border-radius: 8px;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}

/* å¯¼èˆªæ æ ·å¼ */
.custom-nav {
  padding: 4px;
  box-shadow: inset 0 0 0 1px #eee;
}

.custom-nav-item {
  flex: 1;
  justify-content: center;
  gap: 6px;
  padding: 10px;
  font-size: 14px;
  color: #666;
  cursor: pointer;
}

.custom-nav-item:hover:not(.active),
.custom-option:hover:not(.active) {
  color: #ff4d8c;
  border-color: #ff4d8c;
}

.custom-nav-item.active,
.custom-option.active {
  color: #ff4d8c;
  background: rgba(255, 77, 140, 0.08);
  border-color: #ff4d8c;
  font-weight: 600;
}

/* å†…å®¹åŒºåŸŸæ ·å¼ */
.custom-content {
  padding: 16px;
}

.custom-group {
  margin-bottom: 16px;
}

.custom-group-title {
  display: flex;
  align-items: center;
  gap: 8px;
  margin-bottom: 12px;
  font-size: 14px;
  color: #666;
}

.custom-group-title::after {
  content: '';
  flex: 1;
  height: 1px;
  background: #eee;
}

.custom-options {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));
  gap: 10px;
}

.custom-option {
  gap: 8px;
  padding: 10px 14px;
  border: 1px solid #eee;
  font-size: 14px;
  color: #666;
  cursor: pointer;
}

/* å›¾æ ‡æ ·å¼ */
:deep(.du-icon) {
  font-size: 16px;
  transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}

.custom-nav-item:hover :deep(.du-icon),
.custom-option:hover :deep(.du-icon) {
  color: #ff4d8c;
  transform: scale(1.1);
}

/* ç»“æœå±•ç¤ºæ ·å¼ */
.result-display {
  display: flex;
  flex-direction: column;
  gap: 12px;
  margin-top: 12px;
  font-size: 14px;
}

.result-group {
  display: flex;
  align-items: flex-start;
  gap: 8px;
}

.result-label {
  width: 100px;
}

.result-tags {
  display: flex;
  flex-wrap: wrap;
  gap: 4px;
}
</style>
```
::
## API

::api{component="Dropdown"}
::
