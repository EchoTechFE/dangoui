---
head:
  meta:
    - name: 'stage'
      content: 'alpha'
navigation:
  stage: 'alpha'
---

# Dropdown ä¸‹æ‹‰é€‰æ‹©å™¨

:stage{type="alpha"}

ä¸‹æ‹‰æ‰“å¼€è¿™ä¸ªæŠ½å±‰,å–œæ¬¢çš„ç³–æœéƒ½åœ¨é‡Œé¢ğŸ¬

```ts
import { DuDropdown } from 'dangoui'
```

## ä½¿ç”¨æ³¨æ„

- `value` ä¸ºåµŒå¥—å¯¹è±¡ç»“æ„ï¼Œç”¨äºå­˜å‚¨æ¯ä¸ªç»´åº¦ä¸‹å„åˆ†ç»„çš„é€‰ä¸­å€¼
- ç»„ä»¶æ”¯æŒå•ç»´åº¦æˆ–å¤šç»´åº¦ç­›é€‰
- æ”¯æŒå•é€‰å’Œå¤šé€‰æ¨¡å¼

## ç¤ºä¾‹

::demo
---
title: åŸºç¡€ç”¨æ³•
---

æœ€ç®€å•çš„å•ç»´åº¦ç­›é€‰

#snippet
```vue
<template>
  <PreviewBlock title="å•ç»´åº¦ç­›é€‰">
    <DuButton @click="handleShow" full size="large">é€‰æ‹©ä»·æ ¼åŒºé—´</DuButton>
    <DuDropdown
      :dimensions="dimensions"
      v-model:value="value"
      v-model:visible="visible"
      @confirm="handleConfirm"
    />
    <!-- ç»“æœå±•ç¤º -->
    <div v-if="selectedItems.length > 0" class="result-display">
      <span class="result-label">å·²é€‰æ‹©ï¼š</span>
      <DuTag 
        v-for="item in selectedItems" 
        :key="item.value"
        size="small"
        class="result-tag"
      >
        {{ item.label }}
      </DuTag>
      <DuButton type="text" size="small" @click="clearAll">æ¸…ç©º</DuButton>
    </div>
  </PreviewBlock>
</template>

<script setup lang="ts">
import { ref } from 'vue'
import { DuButton, DuTag } from 'dangoui'
import DuDropdown from '/Users/zyr/Desktop/echo-project/dangoui/packages/dangoui/src/dropdown/Dropdown.vue'

const value = ref({})
const visible = ref(false)
const selectedItems = ref([])

function handleShow() {
  visible.value = true
}

function handleConfirm(selected) {
  console.log('é€‰ä¸­çš„é€‰é¡¹ï¼š', selected)
  // æå–æ‰€æœ‰é€‰ä¸­çš„é€‰é¡¹
  const items = []
  Object.values(selected).forEach(dimension => {
    if (Array.isArray(dimension)) {
      items.push(...dimension)
    } else {
      Object.values(dimension).forEach(group => {
        items.push(...group)
      })
    }
  })
  selectedItems.value = items
}

function clearAll() {
  selectedItems.value = []
  value.value = {}
}

const dimensions = [
  {
    label: 'ä»·æ ¼åŒºé—´',
    value: 'price',
    multiple: false,
    options: [
      { label: '50å…ƒä»¥ä¸‹', value: '0-50' },
      { label: '50-100å…ƒ', value: '50-100' },
      { label: '100-200å…ƒ', value: '100-200' },
      { label: '200-500å…ƒ', value: '200-500' },
      { label: '500å…ƒä»¥ä¸Š', value: '500+' }
    ]
  }
]
</script>

<style scoped>
.result-display {
  display: flex;
  align-items: center;
  gap: 8px;
  margin-top: 12px;
  font-size: 14px;
  flex-wrap: wrap;
}

.result-label {
  color: #666;
}

.result-tag {
  margin-right: 4px;
}
</style>
```
::

::demo
---
title: å¤šç»´åº¦ç­›é€‰
---

æ”¯æŒå¤šä¸ªç­›é€‰ç»´åº¦çš„å¤æ‚åœºæ™¯

#snippet
```vue
<template>
  <PreviewBlock title="å¤šç»´åº¦å¤šåˆ†ç»„ç­›é€‰">
    <DuButton @click="handleShow" full size="large">æ‰“å¼€ç­›é€‰</DuButton>
    <DuDropdown
      :dimensions="dimensions"
      v-model:value="value"
      v-model:visible="visible"
      @confirm="handleConfirm"
    />
    <!-- åˆ†ç»„å±•ç¤ºç»“æœ -->
    <div v-if="hasResults" class="complex-result">
      <div class="result-header">
        <h4>ç­›é€‰ç»“æœ</h4>
        <DuButton type="text" size="small" @click="clearAll" >æ¸…ç©ºå…¨éƒ¨</DuButton>
      </div>
      <div v-for="(dimension, dimKey) in selectedItems" :key="dimKey" class="result-dimension">
        <span class="dimension-label">{{ getDimensionTitle(dimKey) }}ï¼š</span>
        <!-- å¤„ç†æ‰å¹³ç»“æ„ï¼ˆç›´æ¥ optionsï¼‰ -->
        <div v-if="Array.isArray(dimension)" class="dimension-tags">
          <DuTag 
            v-for="item in dimension" 
            :key="item.value"
            size="small"
          >
            {{ item.label }}
          </DuTag>
        </div>
        <!-- å¤„ç†åµŒå¥—ç»“æ„ï¼ˆgroupsï¼‰ -->
        <div v-else class="dimension-groups">
          <div 
            v-for="(group, groupKey) in dimension" 
            :key="groupKey" 
            class="group-item"
          >
            <span class="group-label">{{ getGroupTitle(dimKey, groupKey) }}ï¼š</span>
            <div class="group-tags">
              <DuTag 
                v-for="item in group" 
                :key="item.value"
                size="small"
              >
                {{ item.label }}
              </DuTag>
            </div>
          </div>
        </div>
      </div>
    </div>
  </PreviewBlock>
</template>

<script setup lang="ts">
import { ref, computed } from 'vue'
import { DuButton, DuTag } from 'dangoui'
import DuDropdown from '/Users/zyr/Desktop/echo-project/dangoui/packages/dangoui/src/dropdown/Dropdown.vue'

const value = ref({})
const visible = ref(false)
const selectedItems = ref({})

const hasResults = computed(() => Object.keys(selectedItems.value).length > 0)

function getDimensionTitle(dimKey) {
  const dim = dimensions.find(d => d.value === dimKey)
  return dim?.label || dimKey
}

function getGroupTitle(dimKey, groupKey) {
  const dim = dimensions.find(d => d.value === dimKey)
  if (!dim) return groupKey
  
  if ('options' in dim) {
    return dim.label
  }
  
  if ('groups' in dim && dim.groups) {
    const group = dim.groups.find(g => g.value === groupKey)
    return group?.label || groupKey
  }
  
  return groupKey
}

function handleShow() {
  visible.value = true
}

function handleConfirm(selected) {
  console.log('é€‰ä¸­çš„é€‰é¡¹ï¼š', selected)
  selectedItems.value = selected
}

function clearAll() {
  // æ¸…ç©ºæ‰€æœ‰é€‰ä¸­çŠ¶æ€
  value.value = {}
  selectedItems.value = {}
  console.log('å·²æ¸…ç©ºæ‰€æœ‰ç­›é€‰æ¡ä»¶')
}

const dimensions = [
  {
    label: 'å•†å“åˆ†ç±»',
    value: 'category',
    groups: [
      {
        label: 'é£Ÿå“é¥®æ–™',
        value: 'food_drink',
        multiple: true,
        options: [
          { label: 'é›¶é£Ÿå°åƒ', value: 'snacks' },
          { label: 'é¥®æ–™å†²è°ƒ', value: 'drinks' },
          { label: 'ç”Ÿé²œæœè”¬', value: 'fresh' },
          { label: 'ç²®æ²¹è°ƒå‘³', value: 'condiment' }
        ]
      },
      {
        label: 'æœè£…é‹åŒ…',
        value: 'clothing_bags',
        multiple: true,
        options: [
          { label: 'ä¸Šè¡£', value: 'tops' },
          { label: 'è£¤è£…', value: 'pants' },
          { label: 'è£™è£…', value: 'dresses' },
          { label: 'ç®±åŒ…', value: 'bags' }
        ]
      }
    ]
  },
  {
    label: 'ä»·æ ¼åŒºé—´',
    value: 'price_range',
    multiple: false,
    options: [
      { label: '50å…ƒä»¥ä¸‹', value: '0-50' },
      { label: '50-100å…ƒ', value: '50-100' },
      { label: '100-200å…ƒ', value: '100-200' },
      { label: '200-500å…ƒ', value: '200-500' },
      { label: '500å…ƒä»¥ä¸Š', value: '500+' }
    ]
  },
  {
    label: 'å•†å“å±æ€§',
    value: 'product_attrs',
    groups: [
      {
        label: 'ä¼˜æƒ æ´»åŠ¨',
        value: 'promotions',
        multiple: true,
        options: [
          { label: 'é™æ—¶ç‰¹æƒ ', value: 'time_limited' },
          { label: 'æ»¡å‡ä¼˜æƒ ', value: 'full_reduction' },
          { label: 'ä¼šå‘˜ä¸“äº«', value: 'vip_only' },
          { label: 'èµ å“æ´»åŠ¨', value: 'gift' }
        ]
      },
      {
        label: 'é…é€æ–¹å¼',
        value: 'delivery',
        multiple: false,
        options: [
          { label: 'åŒ…é‚®', value: 'free_shipping' },
          { label: 'æé€Ÿè¾¾', value: 'fast_delivery' },
          { label: 'åŒåŸé…é€', value: 'local_delivery' }
        ]
      }
    ]
  }
]
</script>

<style scoped>
.complex-result {
  display: flex;
  flex-direction: column;
  gap: 12px;
  margin-top: 12px;
  font-size: 14px;
  width:100%
}

.result-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding-bottom: 8px;
  border-bottom: 1px solid #eee;
}

.result-header h4 {
  margin: 0;
  font-size: 14px;
  font-weight: normal;
  color: #666;
}

.result-dimension {
  display: flex;
  align-items: flex-start;
  gap: 8px;
}

.dimension-label {
  color: #666;
  white-space: nowrap;
}

.dimension-groups {
  display: flex;
  flex-direction: column;
  gap: 8px;
  flex: 1;
}

.group-item {
  display: flex;
  align-items: flex-start;
  gap: 8px;
  padding-left: 8px;
}

.group-label {
  color: #999;
  font-size: 13px;
  white-space: nowrap;
}

.dimension-tags,
.group-tags {
  display: flex;
  flex-wrap: wrap;
  gap: 8px;
  flex: 1;
}
</style>
```
::

::demo
---
title: è‡ªå®šä¹‰æŒ‰é’®æ–‡æœ¬
---

å¯ä»¥è‡ªå®šä¹‰å–æ¶ˆå’Œç¡®è®¤æŒ‰é’®çš„æ–‡æœ¬

#snippet
```vue
<template>
  <PreviewBlock title="è‡ªå®šä¹‰æŒ‰é’®æ–‡æœ¬">
    <DuButton @click="handleShow" full size="large">é€‰æ‹©å•†å“ç±»å‹</DuButton>
    <DuDropdown
      :dimensions="dimensions"
      v-model:value="value"
      v-model:visible="visible"
      confirm-text="åº”ç”¨ç­›é€‰"
      @confirm="handleConfirm"
    />
    <div v-if="selectedCount > 0" class="selection-info">
      å·²é€‰æ‹© {{ selectedCount }} ä¸ªé€‰é¡¹
    </div>
  </PreviewBlock>
</template>

<script setup lang="ts">
import { ref, computed } from 'vue'
import { DuButton } from 'dangoui'
import DuDropdown from '/Users/zyr/Desktop/echo-project/dangoui/packages/dangoui/src/dropdown/Dropdown.vue'

const value = ref({})
const visible = ref(false)

const selectedCount = computed(() => {
  let count = 0
  Object.values(value.value).forEach(dimension => {
    Object.values(dimension).forEach(group => {
      count += Array.isArray(group) ? group.length : 0
    })
  })
  return count
})

function handleShow() {
  visible.value = true
}

function handleConfirm(selected) {
  console.log('åº”ç”¨ç­›é€‰ï¼š', selected)
}

const dimensions = [
  {
    label: 'å•†å“ç±»å‹',
    value: 'type',
    multiple: true,
    options: [
      { label: 'æ–°å“', value: 'new' },
      { label: 'çƒ­é”€', value: 'hot' },
      { label: 'é™é‡', value: 'limited' },
      { label: 'é¢„å”®', value: 'presale'}
    ]
  }
]
</script>

<style scoped>
.selection-info {
  margin-top: 12px;
  padding: 8px 12px;
  background: #f5f5f5;
  border-radius: 4px;
  font-size: 14px;
  color: #666;
}
</style>
```
::

## API

::api{component="Dropdown"}
::